---
title: Demo
date: 2021-03-20 22:16:36
permalink: /wiki/picimagesearch/ru/Iqdb/Demo/
article: false
categories:
  - é¡¹ç›®
  - PicImageSearch
  - Iqdb
tags:
  - PicImageSearch
  - wiki
  - Iqdb
  - Iqdb 3D
author:
  name: kitUIN
  link: https://github.com/kitUIN
comment: true
---

# Demo

## ç¤ºä¾‹

<code-group>

  <code-block title="Iqdbå¼‚æ­¥" active>

```python
import asyncio

from loguru import logger

from PicImageSearch import Iqdb, Network
from PicImageSearch.model import IqdbResponse

# proxies = "http://127.0.0.1:1081"
proxies = None
url = "https://raw.githubusercontent.com/kitUIN/PicImageSearch/main/demo/images/test01.jpg"
file = "images/test01.jpg"
bypass = False  # ç»•è¿‡DNSæ±¡æŸ“


@logger.catch()
async def test() -> None:
    async with Network(proxies=proxies, bypass=bypass) as client:
        iqdb = Iqdb(client=client)
        # resp = await iqdb.search(url=url)
        resp = await iqdb.search(file=file)
        show_result(resp)

def show_result(resp: IqdbResponse) -> None:
    # logger.info(resp.origin)  # åŸå§‹æ•°æ®
    logger.info(resp.url)
    # logger.info(resp.raw[0].origin)
    logger.info(f"è¯´æ˜: {resp.raw[0].content}")
    logger.info(f"æ¥æºåœ°å€: {resp.raw[0].url}")
    logger.info(f"ç¼©ç•¥å›¾: {resp.raw[0].thumbnail}")
    logger.info(f"ç›¸ä¼¼åº¦: {resp.raw[0].similarity}")
    logger.info(f"å›¾ç‰‡å¤§å°: {resp.raw[0].size}")
    logger.info(f"å›¾ç‰‡æ¥æº: {resp.raw[0].source}")
    logger.info(f"å…¶ä»–å›¾ç‰‡æ¥æº: {resp.raw[0].other_source}")
    logger.info(f"SauceNAOæœå›¾é“¾æ¥: {resp.saucenao_url}")
    logger.info(f"Ascii2dæœå›¾é“¾æ¥: {resp.ascii2d_url}")
    logger.info(f"TinEyeæœå›¾é“¾æ¥: {resp.tineye_url}")
    logger.info(f"Googleæœå›¾é“¾æ¥: {resp.google_url}")
    logger.info(f"ç›¸ä¼¼åº¦ä½çš„ç»“æœæœ‰å¤šå°‘: {len(resp.more)}")
    logger.info("-" * 50)


if __name__ == "__main__":
    loop = asyncio.get_event_loop()
    loop.run_until_complete(test())
```

  </code-block>

  <code-block title="IqdbåŒæ­¥">

```python
from loguru import logger

from PicImageSearch.model import IqdbResponse
from PicImageSearch.sync import Iqdb as IqdbSync

# proxies = "http://127.0.0.1:1081"
proxies = None
url = "https://raw.githubusercontent.com/kitUIN/PicImageSearch/main/demo/images/test01.jpg"
file = "images/test01.jpg"
bypass = False  # ç»•è¿‡DNSæ±¡æŸ“


@logger.catch()
def test_sync() -> None:
    iqdb = IqdbSync(proxies=proxies, bypass=bypass)
    resp = iqdb.search(url=url)
    # resp = iqdb.search(file=file)
    show_result(resp)  # type: ignore


def show_result(resp: IqdbResponse) -> None:
    # logger.info(resp.origin)  # åŸå§‹æ•°æ®
    logger.info(resp.url)
    # logger.info(resp.raw[0].origin)
    logger.info(f"è¯´æ˜: {resp.raw[0].content}")
    logger.info(f"æ¥æºåœ°å€: {resp.raw[0].url}")
    logger.info(f"ç¼©ç•¥å›¾: {resp.raw[0].thumbnail}")
    logger.info(f"ç›¸ä¼¼åº¦: {resp.raw[0].similarity}")
    logger.info(f"å›¾ç‰‡å¤§å°: {resp.raw[0].size}")
    logger.info(f"å›¾ç‰‡æ¥æº: {resp.raw[0].source}")
    logger.info(f"å…¶ä»–å›¾ç‰‡æ¥æº: {resp.raw[0].other_source}")
    logger.info(f"SauceNAOæœå›¾é“¾æ¥: {resp.saucenao_url}")
    logger.info(f"Ascii2dæœå›¾é“¾æ¥: {resp.ascii2d_url}")
    logger.info(f"TinEyeæœå›¾é“¾æ¥: {resp.tineye_url}")
    logger.info(f"Googleæœå›¾é“¾æ¥: {resp.google_url}")
    logger.info(f"ç›¸ä¼¼åº¦ä½çš„ç»“æœæœ‰å¤šå°‘: {len(resp.more)}")
    logger.info("-" * 50)


if __name__ == "__main__":
    test_sync()
```

  </code-block>

</code-group>


::: cardList 2

```yaml
- name: å‰å¾€æŸ¥çœ‹
  desc: ğŸš€å¼‚æ­¥æµ‹è¯•æ–‡ä»¶Demo
  link: https://github.com/kitUIN/PicImageSearch/blob/main/demo/demo_iqdb_3d.py
  bgColor: '#DFEEE7'
  textColor: '#2A3344'


```

:::

::: tip ç¨‹åºè¾“å‡º

```log
2022-10-06 01:13:26.024 | INFO     | __main__:show_result:35 - https://iqdb.org/?url=https://iqdb.org/thu/thu_cbf09440.jpg
2022-10-06 01:13:26.025 | INFO     | __main__:show_result:37 - è¯´æ˜: Best match
2022-10-06 01:13:26.025 | INFO     | __main__:show_result:38 - æ¥æºåœ°å€: https://danbooru.donmai.us/posts/4885675
2022-10-06 01:13:26.025 | INFO     | __main__:show_result:39 - ç¼©ç•¥å›¾: https://iqdb.org/danbooru/6/e/0/6e0d18b51c232dc81b29f0c092c246e5.jpg
2022-10-06 01:13:26.025 | INFO     | __main__:show_result:40 - ç›¸ä¼¼åº¦: 91.0
2022-10-06 01:13:26.025 | INFO     | __main__:show_result:41 - å›¾ç‰‡å¤§å°: 2504Ã—3180 [Safe]
2022-10-06 01:13:26.025 | INFO     | __main__:show_result:42 - å›¾ç‰‡æ¥æº: Danbooru
2022-10-06 01:13:26.025 | INFO     | __main__:show_result:43 - å…¶ä»–å›¾ç‰‡æ¥æº: []
2022-10-06 01:13:26.025 | INFO     | __main__:show_result:44 - SauceNAOæœå›¾é“¾æ¥: https://saucenao.com/search.php?db=999&dbmaski=32768&url=https://iqdb.org/thu/thu_cbf09440.jpg
2022-10-06 01:13:26.025 | INFO     | __main__:show_result:45 - Ascii2dæœå›¾é“¾æ¥: https://ascii2d.net/search/url/https://iqdb.org/thu/thu_cbf09440.jpg
2022-10-06 01:13:26.026 | INFO     | __main__:show_result:46 - TinEyeæœå›¾é“¾æ¥: https://tineye.com/search?url=https://iqdb.org/thu/thu_cbf09440.jpg
2022-10-06 01:13:26.026 | INFO     | __main__:show_result:47 - Googleæœå›¾é“¾æ¥: https://www.google.com/searchbyimage?image_url=https://iqdb.org/thu/thu_cbf09440.jpg&safe=off
2022-10-06 01:13:26.026 | INFO     | __main__:show_result:48 - ç›¸ä¼¼åº¦ä½çš„ç»“æœæœ‰å¤šå°‘: 12
```

:::